<!-- Right Sidebar -->
<!-- <div class="right-bar" (clickOutside)="hide()" [exclude]="'.right-bar-toggle'">
    <div data-simplebar class="h-100">
        <div class="rightbar-title px-3 py-4">
            <a href="javascript:void(0);" class="right-bar-toggle float-right" (click)="hide()">
                <i class="mdi mdi-close noti-icon"></i>
            </a>
            <h5 class="m-0">Settings</h5>
        </div>


        <h6 class="text-center mb-0">Choose Layouts</h6>
    </div>

</div>

<div class="rightbar-overlay"></div> -->

<div class="right-bar" (clickOutside)="hide()" [exclude]="'.right-bar-toggle'">
    <div data-simplebar class="h-100">
        <div class="rightbar-title px-2 py-2">
            <a href="javascript:void(0);" class="right-bar-toggle float-right" (click)="hide()">
                <i class="mdi mdi-close noti-icon"></i>
            </a>
            <div class="row d-flex container">
                <button (click)="hide()" (click)="open(content)" type="button"
                    class="btn btn-primary btn-lg btn-block mx-3 ">Agregar nueva
                    tarea</button>
            </div>

        </div>


        <div class="row d-flex container">
            <div class="card-header">
                <h2 class="card-title"><i class="fa fa-tasks"></i>&nbsp;Tareas pendientes</h2>
            </div>
            <div class="col-md-12 float-right">
                <a (click)="hide()" class="btn btn-sm btn-flash-border-primary" routerLink="task">Ver todas</a>
            </div>

            <div class="col-md-12">
                <div class="col-lg-12">

                    <div role="button" class="card" *ngFor="let item of pendientes" [routerLink]="['/task', item.id]" (click)="hide()">
                        <div class="p-3">
                            <div class="d-flex justify-content-start align-items-center"> 
                                <marquee behavior="" direction="">
                                    <i
                                    class="mdi mdi-account-alert"></i> <span class="quote2 pl-2">Asignada por:
                                    {{item["first_name"]}} {{item["second_name"]}} {{item["first_surname"]}}
                                </span>
                                </marquee>
                                
                            </div>
                        </div>
                        <div class="px-3">
                            <h4 class="name">{{item["titulo"]}}</h4>
                            <div class="truncate-module">
                                <p class="quote2">{{item["descripcion"]}}</p>
                            </div>
                        </div>
                        <div class="d-flex justify-content-start px-3 align-items-center"> <i
                                class="mdi mdi-view-comfy task"></i> <span class="quote2 pl-2">Categoría:
                                {{item["tipo"]}}</span>
                        </div>
                        <div class="d-flex justify-content-between px-3 align-items-center pb-3">
                            <div class="d-flex justify-content-start align-items-center"> <i
                                    class="mdi mdi-calendar-clock date"></i> <span class="quote2 pl-2">Fecha:
                                    {{item["fecha"] | date }}
                                </span> </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<ng-template #content let-modal>
    <form [formGroup]="myGroup" class="needs-validation" novalidate>
        <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">Agregar nueva tarea</h4>
            <button type="button" class="btn btn-sm btn-flash-border-primary ri-close-fill" aria-label="Close"
                (click)="modal.dismiss('Cross click')"></button>
        </div>

        <div class="modal-body">

            <div class="row p-1">

                <div class="col-md-6 form-group">
                    <label>Nombre de la tarea</label>
                    <input type="text" class="form-control" name="nombre" required placeholder="Nombre de la tarea"
                        formControlName="nombre" autocomplete="off">
                </div>


                <div class="col-md-6 form-group">
                    <label>Tipo de tarea</label>
                    <ng-select [items]="tipo" name="tipo" bindLabel="name" bindValue="{{tipo.name}}"
                        placeholder="Seleccione" formControlName="tipo">
                    </ng-select>
                </div>

            </div>

            <div class="row p-1">

                <div class="col-md-6 form-group">
                    <label>Asignar tarea a:</label>
                    <ng-select [items]="person" required bindLabel="name" bindValue="{{person.id}}"
                        [placeholder]="(person == 0) ? 'Seleccione' : 'Select' " name="id_asignador"
                        loadingText="loading" formControlName="id_asignador" ngDefaultControl>
                    </ng-select>
                </div>

                <div class="col-md-3 form-group">
                    <label for="validationServerUsername">Fecha</label>
                    <input type="date" class="form-control" id="validationServerUsername" name="fecha"
                        placeholder="Ingrese la fecha" required formControlName="fecha">

                </div>

                <div class="col-md-3 form-group">
                    <label for="exampleInput">Hora</label>
                    <input type="time" class="form-control" id="exampleInput" name="hora" placeholder="HH:mm:ss"
                        required formControlName="hora">
                </div>

            </div>

            <div class="row p-1">

                <div class="col-md-6 form-group">
                    <label for="exampleFormControlTextarea1">Descripción</label>
                    <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name="descripcion"
                        formControlName="descripcion">
                    </textarea>
                </div>
                
                <div class="col-md-6">

                    <label>Adjuntar archivos</label>
                    <div class="input-group mb-3">
                        <div class="custom-file form-group">
                            <input multiple type="file" class="" id="inputGroupFile01" (change)="capturarFile($event)"
                                formControlName="adjuntos" name="adjuntos">
                            <label class="custom-file-label" for="inputGroupFile01" name="adjuntos">Elegir
                                archivos</label>
                        </div>
                    </div>
                </div>
            </div>


        </div>

        <div class="modal-footer">
            <div class="alert alert-danger" role="alert" *ngIf="errorSubida">
                Faltan datos
            </div>
            <div class="row p-1">
                <div class="col-md-12">
                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault" name="link"
                        formControlName="link">
                    <label class="form-check-label" for="flexCheckDefault">
                        ¿Adjuntar link actual?
                    </label>
                </div>
            </div>
            <button type="button" class="btn btn-outline-dark" [disabled]="myGroup.value.nombre === '' || myGroup.value.fecha === ''"
                (click)="saveTask()">Guardar</button>
            <button type="button" class="btn btn-outline-dark" (click)="subirArchivo()">Subir Archivo</button>
            
        </div>
    </form>
</ng-template>


<div class="rightbar-overlay"></div>