<div class="card">
  <div class="card-body">
    <div class="card-title d-flex justify-content-between">
      <h4 class="text-primary">Alertas y comunicaciones</h4>
      <button
        class="btn btn-primary btn-sm"
        (click)="openModal(add)"
        ngbTooltip="Enviar"
      >
        <i class="fas fa-paper-plane"></i>
      </button>
    </div>
    <hr class="line" />
    <table
      class="table table-bordered table-striped table-sm table-responsive-sm"
      style="font-size: small"
      *ngIf="!loading && datas.length > 0; else notData"
    >
      <thead class="bg-light">
        <tr class="text-center text-uppercase">
          <th>Fecha</th>
          <th>Tipo</th>
          <th>Persona Recibe</th>
          <th>Titulo</th>
          <th>Detalles</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of datas">
          <td scope="row">{{ data.created_at | date }}</td>
          <td>{{ data.type }}</td>
          <td>{{ data.first_name }} {{ data.first_surname }}</td>
          <td>{{ data.title }}</td>
          <td>{{ data.description }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<ng-template #add let-modal>
  <div class="modal-content">
    <div class="modal-header">
      <h4 class="text-primary modal-title">Alertas y comunicaciones</h4>
      <button
        type="button"
        class="btn btn-sm btn-flash-border-primary ri-close-fill"
        aria-label="Close"
        (click)="modal.dismiss('Cross click')"
      ></button>
    </div>
  </div>
  <form action="">
    <div class="modal-body">
      <div class="form-row">
        <div class="form-group col-md-12">
          <div class="form-row mt-4">
            <div class="form-group col-md-4">
              <label for="">Grupo</label>
              <select
                class="form-select form-control form-control-sm mr-2"
                aria-label="Default select example"
              >
                <option selected>Seleccione</option>
                <option value="1">Enviar a todos</option>
                <option value="2">Administración</option>
                <option value="3">Dispensación</option>
              </select>
            </div>
            <div class="form-group col-md-4">
              <label for="">Dependencia</label>
              <select
                class="form-select form-control form-control-sm mr-2"
                aria-label="Default select example"
              >
                <option selected>Seleccione</option>
                <option value="1">Enviar a todas</option>
              </select>
            </div>
            <div class="form-group col-md-4">
              <label for="">Funcionarios</label>
              <select
                class="form-select form-control form-control-sm"
                aria-label="Default select example"
              >
                <option selected>Seleccione</option>
                <option value="1">Enviar a todos</option>
              </select>
            </div>
          </div>
        </div>
        <div class="col-12">
          <label for="">Detalle del mensaje</label>
          <textarea
            class="form-control form-control-sm"
            id="descripcion"
            name="notas"
            rows="3"
            placeholder="Escriba la descripción del mensaje"
          >
          </textarea>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button
        type="button"
        class="btn btn-default"
        (click)="modal.dismiss('Cross click')"
      >
        Cancelar
      </button>
      <button type="submit" class="btn btn-primary">Enviar</button>
    </div>
  </form>
</ng-template>

<ng-template #notData>
  <app-not-data [loading]="loading"></app-not-data>
</ng-template>
