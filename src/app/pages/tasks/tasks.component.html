<div class="d-flex justify-content-between">
    <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav nav-tabs mx-3">
        <li [ngbNavItem]="1">
            <a ngbNavLink>Administrador de tareas</a>
            <ng-template ngbNavContent>
                <div class="container mt-4">
                    <div class="row">
                        <div class="col-3">
                            <div class="card">
                                <div class="card-header text-center">
                                    <h4 class="card-title">Pendientes</h4>
                                    <hr style="border-color: #ef476f;">
                                </div>
                                <div class="m-2 example-list" cdkDropList [cdkDropListData]="pendientes"
                                    [cdkDropListConnectedTo]="['list-ejecucion','list-espera','list-finalizado']"
                                    (cdkDropListDropped)="drop($event)" id="list-pendientes">

                                    <div class="card bg-light" *ngFor="let item of pendientes" cdkDrag
                                        [routerLink]="['/task', item.id]">
                                        <div class="p-3">
                                            <div class="d-flex justify-content-start align-items-center">
                                                <marquee behavior="" direction=""><i class="mdi mdi-account-alert"></i>
                                                    <span class="quote2 pl-2">Asignada
                                                        por: {{item["first_name"]}} {{item["second_name"]}}
                                                        {{item["first_surname"]}}
                                                    </span>
                                                </marquee>
                                            </div>
                                        </div>
                                        <div class="px-3">
                                            <h4 class="name">{{item["titulo"]}}</h4>
                                            <div class="truncate-module">
                                                <p class="quote2">{{item["descripcion"]}}</p>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-start px-3 align-items-center"> <i
                                                class="mdi mdi-view-comfy task"></i> <span
                                                class="quote2 pl-2">Categoría:
                                                {{item["tipo"]}}</span>
                                        </div>
                                        <div class="d-flex justify-content-between px-3 align-items-center pb-3">
                                            <div class="d-flex justify-content-start align-items-center"> <i
                                                    class="mdi mdi-calendar-clock date"></i> <span
                                                    class="quote2 pl-2">Fecha: {{item["fecha"] | date }}
                                                </span> </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-3">
                            <div class="card">
                                <div class="card-header text-center">
                                    <h5 class="card-title">En ejecución</h5>
                                    <hr style="border-color: #ffd166;">
                                </div>
                                <div class="m-2 example-list" cdkDropList [cdkDropListData]="ejecucion"
                                    [cdkDropListConnectedTo]="['list-pendientes','list-espera','list-finalizado']"
                                    (cdkDropListDropped)="drop($event)" id="list-ejecucion">
                                    <div class="card bg-light" *ngFor="let item of ejecucion" cdkDrag
                                        [routerLink]="['/task', item.id]">
                                        <div class="p-3">
                                            <div class="d-flex justify-content-start align-items-center">
                                                <marquee behavior="" direction=""><i class="mdi mdi-account-alert"></i>
                                                    <span class="quote2 pl-2">Asignada
                                                        por: {{item["first_name"]}} {{item["second_name"]}}
                                                        {{item["first_surname"]}}
                                                    </span>
                                                </marquee>
                                            </div>
                                        </div>
                                        <div class="px-3">
                                            <h4 class="name">{{item["titulo"]}}</h4>
                                            <div class="truncate-module">
                                                <p class="quote2">{{item["descripcion"]}}</p>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-start px-3 align-items-center"> <i
                                                class="mdi mdi-view-comfy task"></i> <span
                                                class="quote2 pl-2">Categoría:
                                                {{item["tipo"]}}</span>
                                        </div>
                                        <div class="d-flex justify-content-between px-3 align-items-center pb-3">
                                            <div class="d-flex justify-content-start align-items-center"> <i
                                                    class="mdi mdi-calendar-clock date"></i> <span
                                                    class="quote2 pl-2">Fecha: {{item["fecha"] | date }}
                                                </span> </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-3">
                            <div class="card">
                                <div class="card-header text-center">
                                    <h5 class="card-title">En espera</h5>
                                    <hr style="border-color: #118ab2;">
                                </div>
                                <div class="m-2 example-list" cdkDropList [cdkDropListData]="espera"
                                    [cdkDropListConnectedTo]="['list-ejecucion','list-pendientes','list-finalizado']"
                                    (cdkDropListDropped)="drop($event)" id="list-espera">
                                    <div class="card bg-light" *ngFor="let item of espera" cdkDrag
                                        [routerLink]="['/task', item.id]">
                                        <div class="p-3">
                                            <div class="d-flex justify-content-start align-items-center">
                                                <marquee behavior="" direction=""><i class="mdi mdi-account-alert"></i>
                                                    <span class="quote2 pl-2">Asignada
                                                        por: {{item["first_name"]}} {{item["second_name"]}}
                                                        {{item["first_surname"]}}
                                                    </span>
                                                </marquee>
                                            </div>
                                        </div>
                                        <div class="px-3">
                                            <h4 class="name">{{item["titulo"]}}</h4>
                                            <div class="truncate-module">
                                                <p class="quote2">{{item["descripcion"]}}</p>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-start px-3 align-items-center"> <i
                                                class="mdi mdi-view-comfy task"></i> <span
                                                class="quote2 pl-2">Categoría:
                                                {{item["tipo"]}}</span>
                                        </div>
                                        <div class="d-flex justify-content-between px-3 align-items-center pb-3">
                                            <div class="d-flex justify-content-start align-items-center"> <i
                                                    class="mdi mdi-calendar-clock date"></i> <span
                                                    class="quote2 pl-2">Fecha: {{item["fecha"] | date }}
                                                </span> </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-3">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="card-title text-center">Finalizado</h5>
                                    <hr style="border-color: #06d6a0;">
                                </div>
                                <div class="m-2 example-list" cdkDropList [cdkDropListData]="finalizado"
                                    [cdkDropListConnectedTo]="['list-ejecucion','list-espera','list-pendientes']"
                                    (cdkDropListDropped)="drop($event)" id="list-finalizado">
                                    <div class="card bg-light" *ngFor="let item of finalizado" cdkDrag
                                        [routerLink]="['/task', item.id]">
                                        <div class="p-3">
                                            <div class="d-flex justify-content-start align-items-center">
                                                <marquee behavior="" direction=""><i class="mdi mdi-account-alert"></i>
                                                    <span class="quote2 pl-2">Asignada
                                                        por: {{item["first_name"]}} {{item["second_name"]}}
                                                        {{item["first_surname"]}}
                                                    </span>
                                                </marquee>
                                            </div>
                                        </div>
                                        <div class="px-3">
                                            <h4 class="name">{{item["titulo"]}}</h4>
                                            <div class="truncate-module">
                                                <p class="quote2">{{item["descripcion"]}}</p>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-start px-3 align-items-center"> <i
                                                class="mdi mdi-view-comfy task"></i> <span
                                                class="quote2 pl-2">Categoría:
                                                {{item["tipo"]}}</span>
                                        </div>
                                        <div class="d-flex justify-content-between px-3 align-items-center pb-3">
                                            <div class="d-flex justify-content-start align-items-center"> <i
                                                    class="mdi mdi-calendar-clock date"></i> <span
                                                    class="quote2 pl-2">Fecha: {{item["fecha"] | date }}
                                                </span> </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </ng-template>
        </li>
        <li [ngbNavItem]="2">
            <a ngbNavLink>Calendario</a>
            <ng-template ngbNavContent>
                <div class="container mt-4">

                    <!--  -->
                </div>

                <div class="col-8 mx-auto">
                    <div class="card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-3 d-flex justify-content-center">
                                    <div class="row">
                                        <h6 style="color: #ef476f">●</h6>
                                        <p> Pendientes</p>                                        
                                    </div>
                                </div>
                                <div class="col-3 d-flex justify-content-center">
                                    <div class="row">
                                        <h6 style="color: #ffd166">●</h6>
                                        <p> En ejecución</p>
                                    </div>
                                </div>
                                <div class="col-3 d-flex justify-content-center">
                                    <div class="row">
                                        <h6 style="color: #118ab2">●</h6>
                                        <p> En espera</p>
                                    </div>
                                </div>
                                <div class="col-3 d-flex justify-content-center">
                                    <div class="row">
                                        <h6 style="color: #06d6a0">●</h6>
                                        <p> Finalizado</p>
                                    </div>
                                </div>


                            </div>
                            <div class="app-calendar">
                                <full-calendar #calendar defaultView="dayGridMonth" [header]="{
                                        left: 'prevYear,prev,next,nextYear today',
                                        center: 'title',
                                        right: 'dayGridMonth,dayGridWeek,dayGridDay'
                                    }" [plugins]="calendarPlugins" [events]="events"
                                    (eventClick)="onEventClick($event)" [eventResizableFromStart]="'true'"
                                    [eventLimit]="false" themeSystem="bootstrap" [bootstrapFontAwesome]="true"
                                    deepChangeDetection="true" locale="es" [eventTimeFormat]="{
                                        hour: '2-digit',
                                        minute: '2-digit',
                                        meridiem: false,
                                        hour12: true 
                                    }">
                                </full-calendar>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-template>
        </li>
        <li [ngbNavItem]="3">
            <a ngbNavLink>Tareas asignadas</a>
            <ng-template ngbNavContent>
                <div class="container mt-4">
                    <div class="card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-3" *ngFor="let item of task3" (click)="open(content, item)">
                                    <div class="card bg-light" role="button">
                                        <div class="p-3 col-12">
                                            <div class="d-flex justify-content-start align-items-center">
                                                <marquee behavior="" direction=""><i class="mdi mdi-account-alert"></i>
                                                    <span class="quote2 pl-2">Asignada
                                                        a: {{item["first_name"]}} {{item["second_name"]}}
                                                        {{item["first_surname"]}}
                                                    </span>
                                                </marquee>
                                                <div style="color: black;">
                                                    <div *ngIf="item.estado == 'Pendiente'">
                                                        <div class="badge ml-2" style="background-color: #ef476f;">{{item["estado"]}}</div>
                                                    </div>
                                                    <div *ngIf="item.estado == 'En ejecucion'">
                                                        <div class="badge ml-2" style="background-color: #ffd166;">{{item["estado"]}}</div>
                                                    </div>
                                                    <div *ngIf="item.estado == 'En espera'">
                                                        <div class="badge ml-2" style="background-color: #118ab2;">{{item["estado"]}}</div>
                                                    </div>
                                                    <div *ngIf="item.estado == 'Finalizado'">
                                                        <div class="badge ml-2" style="background-color: #06d6a0;">{{item["estado"]}}</div>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                        </div>
                                        <div class="px-3">
                                            <h4 class="name">{{item["titulo"]}}</h4>
                                            <div class="truncate-module">
                                                <p class="quote2">{{item["descripcion"]}}</p>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-start px-3 align-items-center"> <i
                                                class="mdi mdi-view-comfy task"></i> <span class="quote2 pl-2">Categoría:
                                                {{item["tipo"]}}</span>
                                        </div>
                                        <div class="d-flex justify-content-between px-3 align-items-center pb-3">
                                            <div class="d-flex justify-content-start align-items-center"> <i
                                                    class="mdi mdi-calendar-clock date"></i> <span class="quote2 pl-2">Fecha:
                                                    {{item["fecha"] |
                                                    date }}
                                                </span> </div>
                                        </div>
                                    </div>
        
                                </div>
        
                            </div>
                        </div>
                        
                    </div>
                    

                </div>

            </ng-template>
        </li>
        <li [ngbNavItem]="4">
            <a ngbNavLink>Tareas archivadas</a>
            <ng-template ngbNavContent>

            </ng-template>
        </li>
    </ul>
    <button type="button" class="btn btn-primary mx-3 ">Agregar nueva tarea
    </button>
</div>

<div [ngbNavOutlet]="nav" class="mt-2"></div>


<ng-template #content let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title" *ngIf="task">{{task.titulo}}
            <div class="badge badge-danger ml-2">{{task.estado}}</div>
        </h4>

        <button type="button" class="btn btn-sm btn-flash-border-primary ri-close-fill" aria-label="Close"
            (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body" *ngIf="task">
        <i class="mdi mdi-view-comfy task"></i> <span class="quote2 pl-2">Categoría:
            {{task.tipo}}</span>
        <div class="d-flex justify-content-start align-items-center"> <i class="mdi mdi-account-alert"></i>
            <span class="quote2 pl-2">Asignada
                por: {{task.first_name}} {{task.second_name}} {{task.first_surname}}
            </span>

        </div>
        <div>
            <i class="mdi mdi-format-align-left task"></i> <span class="quote2 pl-2">Descripcion:
                {{task.descripcion}}</span>
        </div>
        <div>
            <i class="mdi mdi-calendar task"></i> <span class="quote2 pl-2">Fecha:
                {{task.fecha | date:'fullDate' }}</span>
        </div>
        <div>
            <i class="mdi mdi-calendar-clock task"></i> <span class="quote2 pl-2">Hora:
                {{task.fecha + ' ' + task.hora | date:'shortTime'}}</span>
        </div>

        <h5>{{task.adjuntos}}</h5>
    </div>
    <div class="modal-footer">
        <a class="btn btn btn-outline-dark" *ngIf="task.link" href="{{task.link}}" role="button">Ir</a>
        <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Cerrar</button>
    </div>
</ng-template>